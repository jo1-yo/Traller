# èƒæµ (Traller) - å®Œæ•´å®‰è£…å¯åŠ¨æŒ‡å—

## ğŸš¨ é‡è¦æç¤º

å½“å‰é¡¹ç›®å·²ä¿®å¤æ‰€æœ‰ç¼–è¯‘é”™è¯¯å’ŒAPIé—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š
- âœ… ç§»é™¤äº†æ•°æ®åº“ä¾èµ–ï¼Œé‡‡ç”¨æ— æ•°æ®åº“æ¶æ„
- âœ… ä¿®å¤äº†QueryServiceä¸­ç¼ºå¤±çš„æ–¹æ³•
- âœ… æ›´æ–°äº†æµ‹è¯•è„šæœ¬é€‚é…æ–°æ¶æ„
- âœ… æ”¯æŒç¯å¢ƒå˜é‡é…ç½®APIå¯†é’¥
- âœ… å‡çº§ä¸ºOpenRouter Gemini 2.5 Flashæ¨¡å‹ï¼Œè§£å†³JSON Schemaé—®é¢˜
- âœ… ä¿®å¤äº†å‰ç«¯CSSå’ŒReact Flowå…¼å®¹æ€§é—®é¢˜
- âœ… å®ç°äº†æ™ºèƒ½JSONä¿®å¤æœºåˆ¶ï¼Œè§£å†³APIå“åº”æ ¼å¼é—®é¢˜

ç°åœ¨å¯ä»¥æ­£å¸¸å®‰è£…ä¾èµ–å’Œå¯åŠ¨æœåŠ¡ã€‚

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **pnpm**: >= 8.0.0 (æ¨èåŒ…ç®¡ç†å™¨)
- **æ“ä½œç³»ç»Ÿ**: macOS, Linux, Windows

## ğŸ”§ å¿«é€Ÿå®‰è£…

### ç¬¬ä¸€æ­¥ï¼šå®‰è£…åç«¯ä¾èµ–

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å®‰è£…ä¾èµ–
pnpm install

# éªŒè¯å®‰è£…
pnpm run start:dev
```

å¦‚æœçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºåç«¯å¯åŠ¨æˆåŠŸï¼š
```
[Nest] 12345  - 01/01/2025, 10:00:00 AM     LOG [NestApplication] Nest application successfully started +1ms
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…å‰ç«¯ä¾èµ–

```bash
# æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å‰ç«¯
pnpm run dev
```

å¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºå‰ç«¯å¯åŠ¨æˆåŠŸï¼š
```
  VITE v6.0.1  ready in 500ms

  âœ  Local:   http://localhost:5173/
  âœ  Network: use --host to expose
```

## ğŸ¯ éªŒè¯å®‰è£…

### 1. åç«¯æµ‹è¯•

```bash
cd backend

# å¿«é€Ÿæµ‹è¯•ï¼ˆæ¨èï¼‰
pnpm run test:service quick

# å®Œæ•´æµ‹è¯•ï¼ˆæ¶ˆè€—APIé…é¢è¾ƒå¤šï¼‰
pnpm run test:service full

# æ•°æ®è®¿é—®æµ‹è¯•
pnpm run data test "é©¬äº‘"
```

### 2. å‰ç«¯æµ‹è¯•

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. åœ¨æœç´¢æ¡†è¾“å…¥ "é©¬äº‘" æˆ– "Elon Musk"
3. ç‚¹å‡»"æ¢ç´¢"æŒ‰é’®
4. ç­‰å¾…1-2åˆ†é’ŸæŸ¥çœ‹ç»“æœ

## ğŸ“Š é¡¹ç›®æ¶æ„è¯´æ˜

### åç«¯æœåŠ¡ (ç«¯å£3000)

```
backend/
â”œâ”€â”€ src/services/           # AIæœåŠ¡é›†æˆ
â”‚   â”œâ”€â”€ perplexity.service.ts   # ä¿¡æ¯æœç´¢
â”‚   â”œâ”€â”€ minimax.service.ts      # æ•°æ®ç»“æ„åŒ–  
â”‚   â””â”€â”€ tavily.service.ts       # å¤´åƒæœç´¢
â”œâ”€â”€ src/controllers/        # APIæ§åˆ¶å™¨
â””â”€â”€ scripts/               # æµ‹è¯•è„šæœ¬
```

**å…³é”®æœåŠ¡æµç¨‹**:
1. **Perplexity** (sonar-pro) â†’ æ·±åº¦ä¿¡æ¯æœç´¢
2. **MiniMax M1** â†’ ç»“æ„åŒ–æ•°æ®æå–
3. **Tavily** â†’ å¤´åƒå›¾ç‰‡å¢å¼º

### å‰ç«¯åº”ç”¨ (ç«¯å£5173)

```
frontend/
â”œâ”€â”€ src/components/        # Reactç»„ä»¶
â”‚   â”œâ”€â”€ QueryInterface.tsx     # æŸ¥è¯¢ç•Œé¢
â”‚   â”œâ”€â”€ RelationshipCanvas.tsx # å…³ç³»ç”»å¸ƒ
â”‚   â””â”€â”€ EntityDetailModal.tsx  # è¯¦æƒ…å¼¹çª—
â”œâ”€â”€ src/services/         # APIå®¢æˆ·ç«¯
â””â”€â”€ src/types/           # ç±»å‹å®šä¹‰
```

## ğŸ”‘ APIå¯†é’¥é…ç½®

é¡¹ç›®å·²ç¡¬ç¼–ç ä»¥ä¸‹APIå¯†é’¥ï¼š

### Perplexity API
```javascript
// backend/src/services/perplexity.service.ts
this.apiKey = 'pplx-dev-jd3sqGjVa3LTGRAUItDiwoT7zvlXvsRz';
```

### MiniMax API  
```javascript
// backend/src/services/minimax.service.ts
this.apiKey = 'eyJhbGci...'; // å®Œæ•´JWT token
```

### Tavily API
```javascript
// backend/src/services/tavily.service.ts  
this.apiKey = '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';
```

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. åç«¯ç¼–è¯‘é”™è¯¯

**é—®é¢˜**: `Property 'getAllQueryResults' does not exist on type 'QueryService'`

**è§£å†³**: å·²ä¿®å¤ï¼æ–°çš„QueryServiceç§»é™¤äº†æ•°æ®åº“ç›¸å…³æ–¹æ³•ï¼Œé‡‡ç”¨å†…å­˜å­˜å‚¨ã€‚

### 2. å‰ç«¯ä¾èµ–é”™è¯¯

**é—®é¢˜**: æ‰¾ä¸åˆ°æ¨¡å— "react" æˆ–å…¶ç›¸åº”çš„ç±»å‹å£°æ˜

**è§£å†³**: 
```bash
cd frontend
rm -rf node_modules pnpm-lock.yaml
pnpm install
```

### 3. ç«¯å£å†²çª

**é—®é¢˜**: ç«¯å£3000æˆ–5173è¢«å ç”¨

**è§£å†³**:
```bash
# æŸ¥æ‰¾å ç”¨è¿›ç¨‹
lsof -ti:3000
lsof -ti:5173

# ç»ˆæ­¢è¿›ç¨‹
kill -9 <PID>
```

### 4. APIè°ƒç”¨å¤±è´¥

**é—®é¢˜**: æŸ¥è¯¢è¿”å›é”™è¯¯æˆ–è¶…æ—¶

**æ’æŸ¥æ­¥éª¤**:
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. ç¡®è®¤APIå¯†é’¥æœ‰æ•ˆ
3. æŸ¥çœ‹åç«¯æ—¥å¿—è¾“å‡º
4. å°è¯•ç®€å•æŸ¥è¯¢å¦‚"é©¬äº‘"

### 5. å‰ç«¯æ— æ³•è¿æ¥åç«¯

**é—®é¢˜**: å‰ç«¯æ˜¾ç¤ºç½‘ç»œé”™è¯¯

**è§£å†³**:
1. ç¡®è®¤åç«¯è¿è¡Œåœ¨3000ç«¯å£
2. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
3. æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·Networkæ ‡ç­¾

## ğŸ” è°ƒè¯•æ–¹æ³•

### æŸ¥çœ‹åç«¯æ—¥å¿—
```bash
cd backend
pnpm run start:dev
# è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼ŒæŸ¥çœ‹AIæœåŠ¡è°ƒç”¨æƒ…å†µ
```

### æŸ¥çœ‹å‰ç«¯æ—¥å¿—
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ°Consoleæ ‡ç­¾
3. æŸ¥çœ‹é”™è¯¯ä¿¡æ¯å’Œç½‘ç»œè¯·æ±‚

### ä½¿ç”¨æµ‹è¯•è„šæœ¬
```bash
# åç«¯åŠŸèƒ½æµ‹è¯•
cd backend
pnpm run data info              # æŸ¥çœ‹å·¥å…·ä¿¡æ¯
pnpm run data test "æµ‹è¯•æŸ¥è¯¢"    # æµ‹è¯•å•ä¸ªæŸ¥è¯¢
pnpm run test:service quick     # å¿«é€ŸæœåŠ¡æµ‹è¯•
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æŸ¥è¯¢ä¼˜åŒ–**: ä½¿ç”¨å…·ä½“çš„äººç‰©æˆ–å…¬å¸åç§°
2. **ç½‘ç»œç¯å¢ƒ**: ç¡®ä¿ç¨³å®šçš„ç½‘ç»œè¿æ¥
3. **æµè§ˆå™¨**: æ¨èChromeæˆ–Edgeæµè§ˆå™¨
4. **APIé…é¢**: é¿å…çŸ­æ—¶é—´å†…å¤§é‡æŸ¥è¯¢

## ğŸš€ å¯åŠ¨æµç¨‹æ€»ç»“

```bash
# 1. å¯åŠ¨åç«¯
cd backend && pnpm install && pnpm run start:dev

# 2. å¯åŠ¨å‰ç«¯ (æ–°ç»ˆç«¯)
cd frontend && pnpm install && pnpm run dev

# 3. éªŒè¯æœåŠ¡
cd backend && pnpm run test:service quick

# 4. è®¿é—®å‰ç«¯
open http://localhost:5173
```

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **ç¤ºä¾‹æŸ¥è¯¢**: ä»"é©¬äº‘"ã€"Elon Musk"ç­‰çŸ¥åäººç‰©å¼€å§‹
2. **è€å¿ƒç­‰å¾…**: AIåˆ†æéœ€è¦1-2åˆ†é’Ÿæ—¶é—´
3. **ç”»å¸ƒæ“ä½œ**: æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€ç­›é€‰åŠŸèƒ½
4. **è¯¦æƒ…æŸ¥çœ‹**: ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å®Œæ•´Markdownæ–‡æ¡£
5. **ä¿¡æ¯æº¯æº**: è¯¦æƒ…é¡µé¢åº•éƒ¨æœ‰å®Œæ•´çš„ä¿¡æ¯æ¥æºé“¾æ¥

---

**å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒè¿™ä¸ªæŒ‡å—è¿›è¡Œæ’æŸ¥ã€‚é¡¹ç›®å·²å®Œå…¨ä¿®å¤å¹¶æµ‹è¯•é€šè¿‡ï¼** ğŸ‰ 